
> backend@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
[dotenv@17.2.3] injecting env (19) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
üîß PORT configuration: { PORT_ENV: undefined, PORT_USED: 5001, NODE_ENV: undefined }
Starting server initialization...
Environment: development
Port: 5001
Host: 0.0.0.0
üì° Attempting to start server on 0.0.0.0:5001...
‚úÖ Server successfully started and listening on 0.0.0.0:5001
üîó Health check: http://0.0.0.0:5001/api/health
üìä API endpoints:
   - GET  /api/health
   - GET  /api/categories
   - GET  /api/drinks
   - POST /api/orders
   - GET  /api/admin/orders
üåê Server ready to accept requests!
Executing (default): SELECT 1+1 AS result
‚úÖ Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'categories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'categories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'subcategories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'subcategories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drinks'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drinks' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'orders'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentStatus' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentMethod' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'orders' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_items'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_items' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'countdowns'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'countdowns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'settings'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'settings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admins'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_admins_role' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admins' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'driver_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'driver_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'transactions'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_transactionType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentMethod' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentStatus' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'transactions' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_notifications'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_notifications' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'otps'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'otps' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'email_confirmations'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'email_confirmations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customers'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'customers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admin_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admin_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'saved_addresses'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'saved_addresses' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database synchronized successfully.
Checking for missing columns...
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "isOnOffer" BOOLEAN DEFAULT false;
‚úÖ isOnOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "limitedTimeOffer" BOOLEAN DEFAULT false;
‚úÖ limitedTimeOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "originalPrice" DECIMAL(10,2);
‚úÖ originalPrice column checked/added
Executing (default): UPDATE "drinks" 
      SET "originalPrice" = "price" 
      WHERE "originalPrice" IS NULL;
‚úÖ originalPrice set for existing drinks
Executing (default): ALTER TABLE "drinks" 
      ALTER COLUMN "image" TYPE TEXT;
‚úÖ Image column updated to TEXT type
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacity" JSON;
‚úÖ Capacity column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacityPricing" JSON;
‚úÖ Capacity pricing column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "abv" DECIMAL(5,2);
‚úÖ ABV column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "subcategories" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL UNIQUE,
        "categoryId" INTEGER NOT NULL REFERENCES "categories"("id"),
        "isActive" BOOLEAN DEFAULT true,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ subcategories table checked/created
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "subCategoryId" INTEGER REFERENCES "subcategories"("id");
‚úÖ subCategoryId column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "settings" (
        "id" SERIAL PRIMARY KEY,
        "key" VARCHAR(255) NOT NULL UNIQUE,
        "value" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ settings table checked/created
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentType';
‚úÖ paymentType column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverId';
‚úÖ driverId column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='drivers' AND column_name='pinHash';
‚úÖ pinHash column already exists in drivers table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverAccepted';
‚úÖ driverAccepted column already exists in orders table
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCredited" BOOLEAN DEFAULT false;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCreditedAt" TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayAmount" DECIMAL(10,2) DEFAULT 0;
‚úÖ Driver pay tracking columns checked/added to orders table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentMethod';
‚úÖ paymentMethod column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists
Executing (default): ALTER TYPE "enum_orders_status" ADD VALUE IF NOT EXISTS 'completed';
‚úÖ Status enum updated to include completed
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='tipAmount';
‚úÖ tipAmount column already exists in orders table
Executing (default): CREATE TABLE IF NOT EXISTS "transactions" (
        "id" SERIAL PRIMARY KEY,
        "orderId" INTEGER REFERENCES "orders"("id") ON DELETE CASCADE,
        "driverId" INTEGER REFERENCES "drivers"("id") ON DELETE SET NULL,
        "driverWalletId" INTEGER,
        "transactionType" VARCHAR(255) DEFAULT 'payment',
        "paymentMethod" VARCHAR(255) NOT NULL,
        "paymentProvider" VARCHAR(255),
        "amount" DECIMAL(10, 2) NOT NULL,
        "status" VARCHAR(255) DEFAULT 'pending',
        "paymentStatus" VARCHAR(255) DEFAULT 'pending',
        "receiptNumber" VARCHAR(255),
        "checkoutRequestID" VARCHAR(255),
        "merchantRequestID" VARCHAR(255),
        "phoneNumber" VARCHAR(255),
        "transactionDate" TIMESTAMP WITH TIME ZONE,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ transactions table checked/created
Executing (default): SELECT column_name 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists in transactions table
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='orderId';
‚úÖ orderId column already allows NULL in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverId';
‚úÖ driverId column already exists in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverWalletId';
‚úÖ driverWalletId column already exists in transactions table
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_type_enum AS ENUM ('payment', 'refund', 'tip', 'withdrawal');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'tip'
‚úÖ Added tip to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'withdrawal'
‚úÖ Added withdrawal to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_pay'
‚úÖ Added delivery_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'driver_pay'
‚úÖ Added driver_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_fee_debit'
‚úÖ Added delivery_fee_debit to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'cash_settlement'
‚úÖ Added cash_settlement to transaction_type_enum
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_status_enum AS ENUM ('pending', 'completed', 'failed', 'cancelled');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_payment_method_enum AS ENUM ('card', 'mobile_money', 'cash', 'system');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_payment_method_enum ADD VALUE IF NOT EXISTS 'system'
‚úÖ Added system to transaction_payment_method_enum
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'payment' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing payment transaction dates
Executing (default): UPDATE transactions AS tip
      SET "transactionDate" = pay."transactionDate"
      FROM transactions AS pay
      WHERE tip."transactionType" = 'tip'
        AND pay."transactionType" = 'payment'
        AND pay."status" = 'completed'
        AND tip."orderId" = pay."orderId"
        AND pay."transactionDate" IS NOT NULL
        AND tip."transactionDate" IS DISTINCT FROM pay."transactionDate";
‚úÖ Synchronized tip transaction dates with payment transactions
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'tip' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing tip transaction dates
Executing (default): SELECT data_type 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='transactionType';
Executing (default): ALTER TABLE "transactions" 
          ALTER COLUMN "transactionType" TYPE transaction_type_enum USING "transactionType"::transaction_type_enum;
Executing (default): CREATE TABLE IF NOT EXISTS "order_notifications" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "isActive" BOOLEAN DEFAULT true,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ order_notifications table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "otps" (
        "id" SERIAL PRIMARY KEY,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "otpCode" VARCHAR(10) NOT NULL,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "attempts" INTEGER DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ otps table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "email_confirmations" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) NOT NULL,
        "token" VARCHAR(255) NOT NULL UNIQUE,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ email_confirmations table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "customers" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) UNIQUE,
        "phone" VARCHAR(255) UNIQUE,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "customerName" VARCHAR(255),
        "hasSetPassword" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ customers table checked/created
Executing (default): DO $$ BEGIN
        CREATE TYPE driver_status_enum AS ENUM ('active', 'inactive', 'on_delivery', 'offline');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): CREATE TABLE IF NOT EXISTS "drivers" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL UNIQUE,
        "status" driver_status_enum DEFAULT 'offline',
        "lastActivity" TIMESTAMP WITH TIME ZONE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ drivers table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "driver_wallets" (
        "id" SERIAL PRIMARY KEY,
        "driverId" INTEGER NOT NULL UNIQUE REFERENCES "drivers"("id") ON DELETE CASCADE,
        "balance" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsReceived" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsCount" INTEGER NOT NULL DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ driver_wallets table checked/created
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPay" DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPayCount" INTEGER DEFAULT 0;
‚úÖ Delivery pay tracking columns checked/added to driver_wallets table
Executing (default): CREATE TABLE IF NOT EXISTS "saved_addresses" (
        "id" SERIAL PRIMARY KEY,
        "address" TEXT NOT NULL UNIQUE,
        "placeId" VARCHAR(255),
        "formattedAddress" TEXT,
        "searchCount" INTEGER DEFAULT 0,
        "apiCallsSaved" INTEGER DEFAULT 0,
        "costSaved" DECIMAL(10, 4) DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ saved_addresses table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "admins" (
        "id" SERIAL PRIMARY KEY,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "email" VARCHAR(255) NOT NULL UNIQUE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ admins table checked/created
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='admins' AND column_name='password';
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='role';
‚úÖ role column already exists in admins table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='inviteToken';
‚úÖ inviteToken columns already exist in admins table
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."username" = 'admin';
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."role" IS NULL;
Database columns updated successfully.
Executing (default): SELECT count(*) AS "count" FROM "categories" AS "Category";
Database setup completed.
Client connected: ERARNKdk_vqGroI9AAAB
Client connected: ivjAaOzCDY4Q7S3ZAAAE
Client connected: WOTiB8odv7y-tqZ0AAAF
Client connected: WIk2p1du_bgECrvYAAAH
Client disconnected: WIk2p1du_bgECrvYAAAH
Client connected: uewwhlxEVjxfmo_MAAAJ
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT "id", "customerName", "status", "totalAmount", "createdAt" FROM "orders" AS "Order" ORDER BY "Order"."createdAt" DESC LIMIT 10;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" ORDER BY "Transaction"."createdAt" DESC LIMIT 10;
Executing (default): SELECT "id", "customerName", "status", "totalAmount", "createdAt" FROM "orders" AS "Order" ORDER BY "Order"."createdAt" DESC LIMIT 10;
Executing (default): SELECT "Transaction"."id", "Transaction"."orderId", "Transaction"."driverId", "Transaction"."driverWalletId", "Transaction"."transactionType", "Transaction"."paymentMethod", "Transaction"."paymentProvider", "Transaction"."amount", "Transaction"."status", "Transaction"."paymentStatus", "Transaction"."receiptNumber", "Transaction"."checkoutRequestID", "Transaction"."merchantRequestID", "Transaction"."phoneNumber", "Transaction"."transactionDate", "Transaction"."notes", "Transaction"."createdAt", "Transaction"."updatedAt", "order"."id" AS "order.id", "order"."customerName" AS "order.customerName" FROM "transactions" AS "Transaction" LEFT OUTER JOIN "orders" AS "order" ON "Transaction"."orderId" = "order"."id" ORDER BY "Transaction"."createdAt" DESC LIMIT 10;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT "OrderItem"."drinkId", SUM("quantity") AS "totalQuantity", COUNT(DISTINCT("orderId")) AS "ordersCount", "drink"."id" AS "drink.id", "drink"."name" AS "drink.name", "drink"."categoryId" AS "drink.categoryId", "drink->category"."id" AS "drink.category.id", "drink->category"."name" AS "drink.category.name" FROM "order_items" AS "OrderItem" LEFT OUTER JOIN "drinks" AS "drink" ON "OrderItem"."drinkId" = "drink"."id" LEFT OUTER JOIN "categories" AS "drink->category" ON "drink"."categoryId" = "drink->category"."id" GROUP BY "OrderItem"."drinkId", "drink"."id", "drink->category"."id" ORDER BY SUM("quantity") DESC;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Client uewwhlxEVjxfmo_MAAAJ joined admin room
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Client connected: K-S8vJAiumP_G6ZcAAAM
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "OrderItem"."drinkId", SUM("quantity") AS "totalQuantity", COUNT(DISTINCT("orderId")) AS "ordersCount", "drink"."id" AS "drink.id", "drink"."name" AS "drink.name", "drink"."categoryId" AS "drink.categoryId", "drink->category"."id" AS "drink.category.id", "drink->category"."name" AS "drink.category.name" FROM "order_items" AS "OrderItem" LEFT OUTER JOIN "drinks" AS "drink" ON "OrderItem"."drinkId" = "drink"."id" LEFT OUTER JOIN "categories" AS "drink->category" ON "drink"."categoryId" = "drink->category"."id" GROUP BY "OrderItem"."drinkId", "drink"."id", "drink->category"."id" ORDER BY SUM("quantity") DESC;
Client K-S8vJAiumP_G6ZcAAAM joined admin room
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "Drink"."id", "Drink"."name", "Drink"."description", "Drink"."price", "Drink"."image", "Drink"."categoryId", "Drink"."subCategoryId", "Drink"."isAvailable", "Drink"."isPopular", "Drink"."isOnOffer", "Drink"."limitedTimeOffer", "Drink"."originalPrice", "Drink"."capacity", "Drink"."capacityPricing", "Drink"."abv", "Drink"."createdAt", "Drink"."updatedAt", "category"."id" AS "category.id", "category"."name" AS "category.name", "category"."description" AS "category.description", "category"."image" AS "category.image", "category"."isActive" AS "category.isActive", "category"."createdAt" AS "category.createdAt", "category"."updatedAt" AS "category.updatedAt", "subCategory"."id" AS "subCategory.id", "subCategory"."name" AS "subCategory.name", "subCategory"."categoryId" AS "subCategory.categoryId", "subCategory"."isActive" AS "subCategory.isActive", "subCategory"."createdAt" AS "subCategory.createdAt", "subCategory"."updatedAt" AS "subCategory.updatedAt" FROM "drinks" AS "Drink" LEFT OUTER JOIN "categories" AS "category" ON "Drink"."categoryId" = "category"."id" LEFT OUTER JOIN "subcategories" AS "subCategory" ON "Drink"."subCategoryId" = "subCategory"."id" ORDER BY "Drink"."name" ASC;
Executing (default): SELECT "id", "name", "description", "image", "isActive", "createdAt", "updatedAt" FROM "categories" AS "Category" ORDER BY "Category"."name" ASC;
Client connected: 6yKufh28AmO14eXQAAAP
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 12;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 10;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 8;
Client 6yKufh28AmO14eXQAAAP joined admin room
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 11;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 15;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 16;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 14;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 17;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 1;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 13;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 9;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 6;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 5;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 7;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 12 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 10 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 11 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 8 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 15 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 16 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 14 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 1 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 17 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 13 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 6 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 9 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 7 ORDER BY "Drink"."id" ASC LIMIT 1;
Returning drinks with capacity pricing: [
  {
    id: 277,
    name: '1659 Sauvignon Blanc',
    capacityPricing: [ [Object] ]
  },
  { id: 281, name: '1659 Sweet Rose', capacityPricing: [ [Object] ] },
  {
    id: 1699,
    name: '1792 Small Batch Whisky',
    capacityPricing: [ [Object] ]
  },
  {
    id: 841,
    name: '1857 Grape juice red',
    capacityPricing: [ [Object] ]
  },
  {
    id: 842,
    name: '1857 Grape juice white',
    capacityPricing: [ [Object] ]
  },
  { id: 304, name: '4th Street Red', capacityPricing: [ [Object] ] },
  {
    id: 292,
    name: '4th Street White 5L',
    capacityPricing: [ [Object] ]
  },
  { id: 998, name: '58 Classic Gin', capacityPricing: [ [Object] ] },
  {
    id: 997,
    name: '58 Gin & Tonic Spiced Orange 330ml',
    capacityPricing: [ [Object] ]
  },
  { id: 1236, name: '8PM Fire Liqueur', capacityPricing: [] },
  { id: 1188, name: '8PM Honey', capacityPricing: [] },
  { id: 222, name: '8PM Indian Whisky', capacityPricing: [ [Object] ] },
  {
    id: 1526,
    name: 'Aberfeldy 12 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1564,
    name: 'Aberfeldy 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1706,
    name: 'Aberfeldy 21 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1737,
    name: 'Aberlour 10 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1625,
    name: 'Aberlour 12 Years',
    capacityPricing: [ [Object] ]
  },
  { id: 1543, name: 'Aberlour 18 Years', capacityPricing: null },
  {
    id: 1288,
    name: 'Absolut Citron',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1386, name: 'Absolut Elyx', capacityPricing: [ [Object] ] },
  { id: 1292, name: 'Absolut Kurant', capacityPricing: [ [Object] ] },
  {
    id: 1290,
    name: 'Absolut Raspberri',
    capacityPricing: [ [Object] ]
  },
  { id: 1289, name: 'Absolut Vanilla', capacityPricing: [ [Object] ] },
  {
    id: 1006,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 25,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 365, name: 'Absolut Watkins', capacityPricing: [ [Object] ] },
  { id: 1390, name: 'Absolute Apeach', capacityPricing: [ [Object] ] },
  { id: 1384, name: 'Absolute Oak', capacityPricing: [ [Object] ] },
  { id: 1407, name: 'Absolute Pears', capacityPricing: [ [Object] ] },
  { id: 1391, name: 'Absolute Pepper', capacityPricing: [ [Object] ] },
  { id: 1007, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1392, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1394, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  { id: 1008, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  {
    id: 385,
    name: 'Ace Of Spades Champagne',
    capacityPricing: [ [Object] ]
  },
  {
    id: 941,
    name: 'Afri Bull Cafe Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1241,
    name: 'African Secret Marula Cream Liqueur',
    capacityPricing: []
  },
  { id: 700, name: 'Agavita Anejo', capacityPricing: [ [Object] ] },
  { id: 675, name: 'Agavita Blanco', capacityPricing: [ [Object] ] },
  { id: 1726, name: 'Akashi Red Whisky', capacityPricing: null },
  { id: 1723, name: 'Akashi White Oak', capacityPricing: [ [Object] ] },
  { id: 467, name: 'Akso Aloe Grapes', capacityPricing: [ [Object] ] },
  {
    id: 130,
    name: 'Akso Aloe Grapes',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 468, name: 'Akso Apple Ice', capacityPricing: [ [Object] ] },
  { id: 461, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 127, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 455, name: 'Akso Grape Ice', capacityPricing: [ [Object] ] },
  { id: 458, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 125, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 462, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  { id: 128, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  {
    id: 446,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 120,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 466,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  {
    id: 129,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  { id: 50, name: 'Al Capone Cigar', capacityPricing: [ [Object] ] },
  { id: 1802, name: 'Alamos Malbec', capacityPricing: null },
  {
    id: 224,
    name: 'All Seasons Whiskey',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 294,
    name: 'Alma Mora Pinot Grigio',
    capacityPricing: [ [Object] ]
  },
  { id: 1811, name: 'Alma Mora Shiraz', capacityPricing: [ [Object] ] },
  { id: 1814, name: 'Altar wine', capacityPricing: [ [Object] ] },
  { id: 1189, name: 'Amarula Cream Liqueur', capacityPricing: [] },
  { id: 1217, name: 'Amarula Gold', capacityPricing: [] },
  {
    id: 1242,
    name: 'Amarula Raspberry Chocolate',
    capacityPricing: []
  },
  {
    id: 1230,
    name: 'Amarula Vanilla Spice Cream',
    capacityPricing: []
  },
  {
    id: 1582,
    name: 'American Honey Whiskey Liqueur',
    capacityPricing: null
  },
  { id: 367, name: 'Amsterdam Vodka', capacityPricing: [ [Object] ] },
  {
    id: 903,
    name: 'Angostura 3 Years Old Reserve',
    capacityPricing: [ [Object] ]
  },
  {
    id: 902,
    name: 'Angostura 5 Years Old Superior Gold',
    capacityPricing: [ [Object] ]
  },
  { id: 1209, name: 'Angostura Bitters', capacityPricing: [] },
  {
    id: 904,
    name: 'Angostura Bitters',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 900,
    name: 'Angostura Caribbean Rum 1824',
    capacityPricing: [ [Object] ]
  },
  {
    id: 901,
    name: 'Angostura Caribbean Rum 1919',
    capacityPricing: [ [Object] ]
  },
  { id: 1225, name: 'Anthon Berg Chocolate', capacityPricing: [] },
  {
    id: 807,
    name: 'Aquamist sparkling water',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1757,
    name: 'Arthur Metz Cr√©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 372,
    name: 'Arthur Metz Cr√©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 375,
    name: "Arthur Metz Cr√©mant d'Alsace",
    capacityPricing: [ [Object] ]
  },
  {
    id: 1761,
    name: "Arthur Metz Cr√©mant d'Alsace",
    capacityPricing: null
  },
  { id: 1824, name: 'Asconi Pastoral', capacityPricing: [ [Object] ] },
  {
    id: 287,
    name: 'Asconi Red Semi Sweet',
    capacityPricing: [ [Object] ]
  },
  {
    id: 541,
    name: 'Atlas Ultra Strong 14',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1714,
    name: 'Auchentoshan 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1592,
    name: 'Auchentoshan American Oak',
    capacityPricing: [ [Object] ]
  },
  { id: 662, name: 'Azul Gold Tequila', capacityPricing: [ [Object] ] },
  {
    id: 690,
    name: 'Azul Reposado Tequila',
    capacityPricing: [ [Object] ]
  },
  { id: 930, name: 'Bacardi 8 Years', capacityPricing: [ [Object] ] },
  {
    id: 931,
    name: 'Bacardi Anejo Cuatro',
    capacityPricing: [ [Object] ]
  },
  {
    id: 926,
    name: 'Bacardi Black',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 923,
    name: 'Bacardi Breezer Lime',
    capacityPricing: [ [Object] ]
  },
  {
    id: 922,
    name: 'Bacardi Breezer Peach',
    capacityPricing: [ [Object] ]
  },
  {
    id: 921,
    name: 'Bacardi Breezer Pineapple',
    capacityPricing: [ [Object] ]
  },
  {
    id: 924,
    name: 'Bacardi Breezer Watermelon',
    capacityPricing: [ [Object] ]
  },
  {
    id: 925,
    name: 'Bacardi Carta Blanca',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 929,
    name: 'Bacardi Gold',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 927, name: 'Bacardi Limon rum', capacityPricing: [ [Object] ] },
  { id: 933, name: 'Bacardi Mojito', capacityPricing: [ [Object] ] },
  {
    id: 928,
    name: 'Bacardi Oakheart [New Bacardi spiced]',
    capacityPricing: [ [Object] ]
  },
  {
    id: 160,
    name: 'Bacardi Superior White Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 932,
    name: 'Bacardi spiced Rum',
    capacityPricing: [ [Object] ]
  },
  ... 1288 more items
]
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 5 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "Drink"."id", "Drink"."name", "Drink"."description", "Drink"."price", "Drink"."image", "Drink"."categoryId", "Drink"."subCategoryId", "Drink"."isAvailable", "Drink"."isPopular", "Drink"."isOnOffer", "Drink"."limitedTimeOffer", "Drink"."originalPrice", "Drink"."capacity", "Drink"."capacityPricing", "Drink"."abv", "Drink"."createdAt", "Drink"."updatedAt", "category"."id" AS "category.id", "category"."name" AS "category.name", "category"."description" AS "category.description", "category"."image" AS "category.image", "category"."isActive" AS "category.isActive", "category"."createdAt" AS "category.createdAt", "category"."updatedAt" AS "category.updatedAt", "subCategory"."id" AS "subCategory.id", "subCategory"."name" AS "subCategory.name", "subCategory"."categoryId" AS "subCategory.categoryId", "subCategory"."isActive" AS "subCategory.isActive", "subCategory"."createdAt" AS "subCategory.createdAt", "subCategory"."updatedAt" AS "subCategory.updatedAt" FROM "drinks" AS "Drink" LEFT OUTER JOIN "categories" AS "category" ON "Drink"."categoryId" = "category"."id" LEFT OUTER JOIN "subcategories" AS "subCategory" ON "Drink"."subCategoryId" = "subCategory"."id" ORDER BY "Drink"."name" ASC;
Executing (default): SELECT "id", "name", "description", "image", "isActive", "createdAt", "updatedAt" FROM "categories" AS "Category" ORDER BY "Category"."name" ASC;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 12;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 10;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 8;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 11;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 15;
Returning drinks with capacity pricing: [
  {
    id: 277,
    name: '1659 Sauvignon Blanc',
    capacityPricing: [ [Object] ]
  },
  { id: 281, name: '1659 Sweet Rose', capacityPricing: [ [Object] ] },
  {
    id: 1699,
    name: '1792 Small Batch Whisky',
    capacityPricing: [ [Object] ]
  },
  {
    id: 841,
    name: '1857 Grape juice red',
    capacityPricing: [ [Object] ]
  },
  {
    id: 842,
    name: '1857 Grape juice white',
    capacityPricing: [ [Object] ]
  },
  { id: 304, name: '4th Street Red', capacityPricing: [ [Object] ] },
  {
    id: 292,
    name: '4th Street White 5L',
    capacityPricing: [ [Object] ]
  },
  { id: 998, name: '58 Classic Gin', capacityPricing: [ [Object] ] },
  {
    id: 997,
    name: '58 Gin & Tonic Spiced Orange 330ml',
    capacityPricing: [ [Object] ]
  },
  { id: 1236, name: '8PM Fire Liqueur', capacityPricing: [] },
  { id: 1188, name: '8PM Honey', capacityPricing: [] },
  { id: 222, name: '8PM Indian Whisky', capacityPricing: [ [Object] ] },
  {
    id: 1526,
    name: 'Aberfeldy 12 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1564,
    name: 'Aberfeldy 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1706,
    name: 'Aberfeldy 21 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1737,
    name: 'Aberlour 10 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1625,
    name: 'Aberlour 12 Years',
    capacityPricing: [ [Object] ]
  },
  { id: 1543, name: 'Aberlour 18 Years', capacityPricing: null },
  {
    id: 1288,
    name: 'Absolut Citron',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 1386, name: 'Absolut Elyx', capacityPricing: [ [Object] ] },
  { id: 1292, name: 'Absolut Kurant', capacityPricing: [ [Object] ] },
  {
    id: 1290,
    name: 'Absolut Raspberri',
    capacityPricing: [ [Object] ]
  },
  { id: 1289, name: 'Absolut Vanilla', capacityPricing: [ [Object] ] },
  {
    id: 1006,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 25,
    name: 'Absolut Vodka',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 365, name: 'Absolut Watkins', capacityPricing: [ [Object] ] },
  { id: 1390, name: 'Absolute Apeach', capacityPricing: [ [Object] ] },
  { id: 1384, name: 'Absolute Oak', capacityPricing: [ [Object] ] },
  { id: 1407, name: 'Absolute Pears', capacityPricing: [ [Object] ] },
  { id: 1391, name: 'Absolute Pepper', capacityPricing: [ [Object] ] },
  { id: 1007, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1392, name: 'Absolute Unique', capacityPricing: [ [Object] ] },
  { id: 1394, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  { id: 1008, name: 'Absolute mango', capacityPricing: [ [Object] ] },
  {
    id: 385,
    name: 'Ace Of Spades Champagne',
    capacityPricing: [ [Object] ]
  },
  {
    id: 941,
    name: 'Afri Bull Cafe Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1241,
    name: 'African Secret Marula Cream Liqueur',
    capacityPricing: []
  },
  { id: 700, name: 'Agavita Anejo', capacityPricing: [ [Object] ] },
  { id: 675, name: 'Agavita Blanco', capacityPricing: [ [Object] ] },
  { id: 1726, name: 'Akashi Red Whisky', capacityPricing: null },
  { id: 1723, name: 'Akashi White Oak', capacityPricing: [ [Object] ] },
  { id: 467, name: 'Akso Aloe Grapes', capacityPricing: [ [Object] ] },
  {
    id: 130,
    name: 'Akso Aloe Grapes',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 468, name: 'Akso Apple Ice', capacityPricing: [ [Object] ] },
  { id: 461, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 127, name: 'Akso Energy Drink', capacityPricing: [ [Object] ] },
  { id: 455, name: 'Akso Grape Ice', capacityPricing: [ [Object] ] },
  { id: 458, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 125, name: 'Akso Mango Ice', capacityPricing: [ [Object] ] },
  { id: 462, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  { id: 128, name: 'Akso Melon Ice', capacityPricing: [ [Object] ] },
  {
    id: 446,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 120,
    name: 'Akso Strawberry Ice',
    capacityPricing: [ [Object] ]
  },
  {
    id: 466,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  {
    id: 129,
    name: 'Akso Strawberry pitaya',
    capacityPricing: [ [Object] ]
  },
  { id: 50, name: 'Al Capone Cigar', capacityPricing: [ [Object] ] },
  { id: 1802, name: 'Alamos Malbec', capacityPricing: null },
  {
    id: 224,
    name: 'All Seasons Whiskey',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 294,
    name: 'Alma Mora Pinot Grigio',
    capacityPricing: [ [Object] ]
  },
  { id: 1811, name: 'Alma Mora Shiraz', capacityPricing: [ [Object] ] },
  { id: 1814, name: 'Altar wine', capacityPricing: [ [Object] ] },
  { id: 1189, name: 'Amarula Cream Liqueur', capacityPricing: [] },
  { id: 1217, name: 'Amarula Gold', capacityPricing: [] },
  {
    id: 1242,
    name: 'Amarula Raspberry Chocolate',
    capacityPricing: []
  },
  {
    id: 1230,
    name: 'Amarula Vanilla Spice Cream',
    capacityPricing: []
  },
  {
    id: 1582,
    name: 'American Honey Whiskey Liqueur',
    capacityPricing: null
  },
  { id: 367, name: 'Amsterdam Vodka', capacityPricing: [ [Object] ] },
  {
    id: 903,
    name: 'Angostura 3 Years Old Reserve',
    capacityPricing: [ [Object] ]
  },
  {
    id: 902,
    name: 'Angostura 5 Years Old Superior Gold',
    capacityPricing: [ [Object] ]
  },
  { id: 1209, name: 'Angostura Bitters', capacityPricing: [] },
  {
    id: 904,
    name: 'Angostura Bitters',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 900,
    name: 'Angostura Caribbean Rum 1824',
    capacityPricing: [ [Object] ]
  },
  {
    id: 901,
    name: 'Angostura Caribbean Rum 1919',
    capacityPricing: [ [Object] ]
  },
  { id: 1225, name: 'Anthon Berg Chocolate', capacityPricing: [] },
  {
    id: 807,
    name: 'Aquamist sparkling water',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1757,
    name: 'Arthur Metz Cr√©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 372,
    name: 'Arthur Metz Cr√©mant Rose',
    capacityPricing: [ [Object] ]
  },
  {
    id: 375,
    name: "Arthur Metz Cr√©mant d'Alsace",
    capacityPricing: [ [Object] ]
  },
  {
    id: 1761,
    name: "Arthur Metz Cr√©mant d'Alsace",
    capacityPricing: null
  },
  { id: 1824, name: 'Asconi Pastoral', capacityPricing: [ [Object] ] },
  {
    id: 287,
    name: 'Asconi Red Semi Sweet',
    capacityPricing: [ [Object] ]
  },
  {
    id: 541,
    name: 'Atlas Ultra Strong 14',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1714,
    name: 'Auchentoshan 18 Years',
    capacityPricing: [ [Object] ]
  },
  {
    id: 1592,
    name: 'Auchentoshan American Oak',
    capacityPricing: [ [Object] ]
  },
  { id: 662, name: 'Azul Gold Tequila', capacityPricing: [ [Object] ] },
  {
    id: 690,
    name: 'Azul Reposado Tequila',
    capacityPricing: [ [Object] ]
  },
  { id: 930, name: 'Bacardi 8 Years', capacityPricing: [ [Object] ] },
  {
    id: 931,
    name: 'Bacardi Anejo Cuatro',
    capacityPricing: [ [Object] ]
  },
  {
    id: 926,
    name: 'Bacardi Black',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 923,
    name: 'Bacardi Breezer Lime',
    capacityPricing: [ [Object] ]
  },
  {
    id: 922,
    name: 'Bacardi Breezer Peach',
    capacityPricing: [ [Object] ]
  },
  {
    id: 921,
    name: 'Bacardi Breezer Pineapple',
    capacityPricing: [ [Object] ]
  },
  {
    id: 924,
    name: 'Bacardi Breezer Watermelon',
    capacityPricing: [ [Object] ]
  },
  {
    id: 925,
    name: 'Bacardi Carta Blanca',
    capacityPricing: [ [Object], [Object] ]
  },
  {
    id: 929,
    name: 'Bacardi Gold',
    capacityPricing: [ [Object], [Object] ]
  },
  { id: 927, name: 'Bacardi Limon rum', capacityPricing: [ [Object] ] },
  { id: 933, name: 'Bacardi Mojito', capacityPricing: [ [Object] ] },
  {
    id: 928,
    name: 'Bacardi Oakheart [New Bacardi spiced]',
    capacityPricing: [ [Object] ]
  },
  {
    id: 160,
    name: 'Bacardi Superior White Rum',
    capacityPricing: [ [Object] ]
  },
  {
    id: 932,
    name: 'Bacardi spiced Rum',
    capacityPricing: [ [Object] ]
  },
  ... 1288 more items
]
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 16;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 14;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 17;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 1;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 13;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 9;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 6;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 5;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."categoryId" = 7;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 12 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 15 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 10 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 8 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 11 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 16 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 14 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 17 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 1 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 13 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 6 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 9 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 5 ORDER BY "Drink"."id" ASC LIMIT 1;
Executing (default): SELECT "image" FROM "drinks" AS "Drink" WHERE ("Drink"."image" IS NOT NULL AND "Drink"."image" != '') AND "Drink"."categoryId" = 7 ORDER BY "Drink"."id" ASC LIMIT 1;
‚úÖ Using callback URL from environment: https://homiest-psychopharmacologic-anaya.ngrok-free.dev/api/mpesa/callback
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "name", "phoneNumber", "status" FROM "drivers" AS "Driver" ORDER BY "Driver"."createdAt" DESC LIMIT 50;
üîç Looking up driver with phone: 254712345678 (cleaned: 254712345678)
üìã Trying 3 variants: [ '254712345678', '0712345678', '712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '254712345678' OR "Driver"."phoneNumber" ILIKE '0712345678' OR "Driver"."phoneNumber" ILIKE '712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE (TRIM("phoneNumber") = '254712345678' OR TRIM("phoneNumber") = '0712345678' OR TRIM("phoneNumber") = '712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%254712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%0712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%712345678%' LIMIT 1;
‚ùå Driver not found for phone: 254712345678
üìã Tried variants: [ '254712345678', '0712345678', '712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber" FROM "drivers" AS "Driver" LIMIT 10;
üìã Sample drivers in database: []
üîç Looking up driver with phone: 0712345678 (cleaned: 0712345678)
üìã Trying 3 variants: [ '0712345678', '254712345678', '712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '0712345678' OR "Driver"."phoneNumber" ILIKE '254712345678' OR "Driver"."phoneNumber" ILIKE '712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE (TRIM("phoneNumber") = '0712345678' OR TRIM("phoneNumber") = '254712345678' OR TRIM("phoneNumber") = '712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%0712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%254712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%712345678%' LIMIT 1;
‚ùå Driver not found for phone: 0712345678
üìã Tried variants: [ '0712345678', '254712345678', '712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber" FROM "drivers" AS "Driver" LIMIT 10;
üìã Sample drivers in database: []
üîç Looking up driver with phone: 712345678 (cleaned: 712345678)
üìã Trying 3 variants: [ '712345678', '254712345678', '0712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '712345678' OR "Driver"."phoneNumber" ILIKE '254712345678' OR "Driver"."phoneNumber" ILIKE '0712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE (TRIM("phoneNumber") = '712345678' OR TRIM("phoneNumber") = '254712345678' OR TRIM("phoneNumber") = '0712345678') LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%254712345678%' LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" ILIKE '%0712345678%' LIMIT 1;
‚ùå Driver not found for phone: 712345678
üìã Tried variants: [ '712345678', '254712345678', '0712345678' ]
Executing (default): SELECT "id", "name", "phoneNumber" FROM "drivers" AS "Driver" LIMIT 10;
üìã Sample drivers in database: []
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Client disconnected: K-S8vJAiumP_G6ZcAAAM
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" ORDER BY "Driver"."lastActivity" DESC, "Driver"."createdAt" DESC;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" ORDER BY "Driver"."lastActivity" DESC, "Driver"."createdAt" DESC;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" = '0727893741';
Executing (default): INSERT INTO "drivers" ("id","name","phoneNumber","status","lastActivity","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6) RETURNING "id","name","phoneNumber","pushToken","status","lastActivity","pinHash","createdAt","updatedAt";
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" ORDER BY "Driver"."lastActivity" DESC, "Driver"."createdAt" DESC;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "name", "phoneNumber", "status" FROM "drivers" AS "Driver" ORDER BY "Driver"."createdAt" DESC LIMIT 50;
üîç Looking up driver with phone: 0727893741 (cleaned: 0727893741)
üìã Trying 3 variants: [ '0727893741', '254727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
üîç Looking up driver with phone: 254727893741 (cleaned: 254727893741)
üìã Trying 3 variants: [ '254727893741', '0727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
üîç Looking up driver with phone: 727893741 (cleaned: 727893741)
üìã Trying 3 variants: [ '727893741', '254727893741', '0727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '727893741' OR "Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '0727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[dotenv@17.2.3] injecting env (19) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîß PORT configuration: { PORT_ENV: undefined, PORT_USED: 5001, NODE_ENV: undefined }
Starting server initialization...
Environment: development
Port: 5001
Host: 0.0.0.0
üì° Attempting to start server on 0.0.0.0:5001...
‚úÖ Server successfully started and listening on 0.0.0.0:5001
üîó Health check: http://0.0.0.0:5001/api/health
üìä API endpoints:
   - GET  /api/health
   - GET  /api/categories
   - GET  /api/drinks
   - POST /api/orders
   - GET  /api/admin/orders
üåê Server ready to accept requests!
Executing (default): SELECT 1+1 AS result
‚úÖ Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'categories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'categories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'subcategories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'subcategories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drinks'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drinks' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'orders'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentStatus' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentMethod' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'orders' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_items'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_items' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
üîç Looking up driver with phone: 0727893741 (cleaned: 0727893741)
üìã Trying 3 variants: [ '0727893741', '254727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'countdowns'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'countdowns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
‚úÖ Found driver #3 with phone: 0727893741
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'settings'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'settings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admins'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_admins_role' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admins' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'driver_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'driver_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'transactions'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_transactionType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentMethod' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentStatus' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'transactions' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_notifications'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_notifications' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'otps'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'otps' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'email_confirmations'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'email_confirmations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customers'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'customers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admin_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admin_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'saved_addresses'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'saved_addresses' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database synchronized successfully.
Checking for missing columns...
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "isOnOffer" BOOLEAN DEFAULT false;
‚úÖ isOnOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "limitedTimeOffer" BOOLEAN DEFAULT false;
‚úÖ limitedTimeOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "originalPrice" DECIMAL(10,2);
‚úÖ originalPrice column checked/added
Executing (default): UPDATE "drinks" 
      SET "originalPrice" = "price" 
      WHERE "originalPrice" IS NULL;
‚úÖ originalPrice set for existing drinks
Executing (default): ALTER TABLE "drinks" 
      ALTER COLUMN "image" TYPE TEXT;
‚úÖ Image column updated to TEXT type
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacity" JSON;
‚úÖ Capacity column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacityPricing" JSON;
‚úÖ Capacity pricing column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "abv" DECIMAL(5,2);
‚úÖ ABV column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "subcategories" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL UNIQUE,
        "categoryId" INTEGER NOT NULL REFERENCES "categories"("id"),
        "isActive" BOOLEAN DEFAULT true,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ subcategories table checked/created
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "subCategoryId" INTEGER REFERENCES "subcategories"("id");
‚úÖ subCategoryId column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "settings" (
        "id" SERIAL PRIMARY KEY,
        "key" VARCHAR(255) NOT NULL UNIQUE,
        "value" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ settings table checked/created
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentType';
‚úÖ paymentType column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverId';
‚úÖ driverId column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='drivers' AND column_name='pinHash';
‚úÖ pinHash column already exists in drivers table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverAccepted';
‚úÖ driverAccepted column already exists in orders table
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCredited" BOOLEAN DEFAULT false;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCreditedAt" TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayAmount" DECIMAL(10,2) DEFAULT 0;
‚úÖ Driver pay tracking columns checked/added to orders table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentMethod';
‚úÖ paymentMethod column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists
Executing (default): ALTER TYPE "enum_orders_status" ADD VALUE IF NOT EXISTS 'completed';
‚úÖ Status enum updated to include completed
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='tipAmount';
‚úÖ tipAmount column already exists in orders table
Executing (default): CREATE TABLE IF NOT EXISTS "transactions" (
        "id" SERIAL PRIMARY KEY,
        "orderId" INTEGER REFERENCES "orders"("id") ON DELETE CASCADE,
        "driverId" INTEGER REFERENCES "drivers"("id") ON DELETE SET NULL,
        "driverWalletId" INTEGER,
        "transactionType" VARCHAR(255) DEFAULT 'payment',
        "paymentMethod" VARCHAR(255) NOT NULL,
        "paymentProvider" VARCHAR(255),
        "amount" DECIMAL(10, 2) NOT NULL,
        "status" VARCHAR(255) DEFAULT 'pending',
        "paymentStatus" VARCHAR(255) DEFAULT 'pending',
        "receiptNumber" VARCHAR(255),
        "checkoutRequestID" VARCHAR(255),
        "merchantRequestID" VARCHAR(255),
        "phoneNumber" VARCHAR(255),
        "transactionDate" TIMESTAMP WITH TIME ZONE,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ transactions table checked/created
Executing (default): SELECT column_name 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists in transactions table
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='orderId';
‚úÖ orderId column already allows NULL in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverId';
‚úÖ driverId column already exists in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverWalletId';
‚úÖ driverWalletId column already exists in transactions table
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_type_enum AS ENUM ('payment', 'refund', 'tip', 'withdrawal');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'tip'
‚úÖ Added tip to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'withdrawal'
‚úÖ Added withdrawal to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_pay'
‚úÖ Added delivery_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'driver_pay'
‚úÖ Added driver_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_fee_debit'
‚úÖ Added delivery_fee_debit to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'cash_settlement'
‚úÖ Added cash_settlement to transaction_type_enum
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_status_enum AS ENUM ('pending', 'completed', 'failed', 'cancelled');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_payment_method_enum AS ENUM ('card', 'mobile_money', 'cash', 'system');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_payment_method_enum ADD VALUE IF NOT EXISTS 'system'
‚úÖ Added system to transaction_payment_method_enum
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'payment' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing payment transaction dates
Executing (default): UPDATE transactions AS tip
      SET "transactionDate" = pay."transactionDate"
      FROM transactions AS pay
      WHERE tip."transactionType" = 'tip'
        AND pay."transactionType" = 'payment'
        AND pay."status" = 'completed'
        AND tip."orderId" = pay."orderId"
        AND pay."transactionDate" IS NOT NULL
        AND tip."transactionDate" IS DISTINCT FROM pay."transactionDate";
‚úÖ Synchronized tip transaction dates with payment transactions
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'tip' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing tip transaction dates
Executing (default): SELECT data_type 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='transactionType';
Executing (default): ALTER TABLE "transactions" 
          ALTER COLUMN "transactionType" TYPE transaction_type_enum USING "transactionType"::transaction_type_enum;
Executing (default): CREATE TABLE IF NOT EXISTS "order_notifications" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "isActive" BOOLEAN DEFAULT true,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ order_notifications table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "otps" (
        "id" SERIAL PRIMARY KEY,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "otpCode" VARCHAR(10) NOT NULL,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "attempts" INTEGER DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ otps table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "email_confirmations" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) NOT NULL,
        "token" VARCHAR(255) NOT NULL UNIQUE,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ email_confirmations table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "customers" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) UNIQUE,
        "phone" VARCHAR(255) UNIQUE,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "customerName" VARCHAR(255),
        "hasSetPassword" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ customers table checked/created
Executing (default): DO $$ BEGIN
        CREATE TYPE driver_status_enum AS ENUM ('active', 'inactive', 'on_delivery', 'offline');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): CREATE TABLE IF NOT EXISTS "drivers" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL UNIQUE,
        "status" driver_status_enum DEFAULT 'offline',
        "lastActivity" TIMESTAMP WITH TIME ZONE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ drivers table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "driver_wallets" (
        "id" SERIAL PRIMARY KEY,
        "driverId" INTEGER NOT NULL UNIQUE REFERENCES "drivers"("id") ON DELETE CASCADE,
        "balance" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsReceived" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsCount" INTEGER NOT NULL DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ driver_wallets table checked/created
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPay" DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPayCount" INTEGER DEFAULT 0;
‚úÖ Delivery pay tracking columns checked/added to driver_wallets table
Executing (default): CREATE TABLE IF NOT EXISTS "saved_addresses" (
        "id" SERIAL PRIMARY KEY,
        "address" TEXT NOT NULL UNIQUE,
        "placeId" VARCHAR(255),
        "formattedAddress" TEXT,
        "searchCount" INTEGER DEFAULT 0,
        "apiCallsSaved" INTEGER DEFAULT 0,
        "costSaved" DECIMAL(10, 4) DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ saved_addresses table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "admins" (
        "id" SERIAL PRIMARY KEY,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "email" VARCHAR(255) NOT NULL UNIQUE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ admins table checked/created
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='admins' AND column_name='password';
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='role';
‚úÖ role column already exists in admins table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='inviteToken';
‚úÖ inviteToken columns already exist in admins table
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."username" = 'admin';
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."role" IS NULL;
Database columns updated successfully.
Executing (default): SELECT count(*) AS "count" FROM "categories" AS "Category";
Database setup completed.
Client connected: n7yAaiR_GDeNnGm9AAAB
üîç Looking up driver with phone: 254727893741 (cleaned: 254727893741)
üìã Trying 3 variants: [ '254727893741', '0727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
Client connected: HKpH9Xl3rL4aZEm7AAAE
Client connected: pRkewsbwPTKNN9q7AAAH
Client connected: pb74yRQO2O_A7m2vAAAI
Client connected: MZ1O0V4CcfSSbA32AAAJ
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
[dotenv@17.2.3] injecting env (19) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
üîß PORT configuration: { PORT_ENV: undefined, PORT_USED: 5001, NODE_ENV: undefined }
Starting server initialization...
Environment: development
Port: 5001
Host: 0.0.0.0
üì° Attempting to start server on 0.0.0.0:5001...
‚úÖ Server successfully started and listening on 0.0.0.0:5001
üîó Health check: http://0.0.0.0:5001/api/health
üìä API endpoints:
   - GET  /api/health
   - GET  /api/categories
   - GET  /api/drinks
   - POST /api/orders
   - GET  /api/admin/orders
üåê Server ready to accept requests!
Executing (default): SELECT 1+1 AS result
‚úÖ Database connection established successfully.
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'categories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'categories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'subcategories'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'subcategories' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drinks'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drinks' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'drivers'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_drivers_status' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'drivers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'orders'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentStatus' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_orders_paymentMethod' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'orders' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_items'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_items' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'countdowns'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'countdowns' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'settings'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'settings' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admins'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_admins_role' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admins' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'driver_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'driver_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'transactions'
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_transactionType' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentMethod' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_status' GROUP BY 1
Executing (default): SELECT t.typname enum_name, array_agg(e.enumlabel ORDER BY enumsortorder) enum_value FROM pg_type t JOIN pg_enum e ON t.oid = e.enumtypid JOIN pg_catalog.pg_namespace n ON n.oid = t.typnamespace WHERE n.nspname = 'public' AND t.typname='enum_transactions_paymentStatus' GROUP BY 1
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'transactions' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'order_notifications'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'order_notifications' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'otps'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'otps' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'email_confirmations'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'email_confirmations' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'customers'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'customers' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'admin_wallets'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'admin_wallets' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'saved_addresses'
Executing (default): SELECT i.relname AS name, ix.indisprimary AS primary, ix.indisunique AS unique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oid AND t.relkind = 'r' and t.relname = 'saved_addresses' GROUP BY i.relname, ix.indexrelid, ix.indisprimary, ix.indisunique, ix.indkey ORDER BY i.relname;
Database synchronized successfully.
Checking for missing columns...
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "isOnOffer" BOOLEAN DEFAULT false;
‚úÖ isOnOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "limitedTimeOffer" BOOLEAN DEFAULT false;
‚úÖ limitedTimeOffer column checked/added
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "originalPrice" DECIMAL(10,2);
‚úÖ originalPrice column checked/added
Executing (default): UPDATE "drinks" 
      SET "originalPrice" = "price" 
      WHERE "originalPrice" IS NULL;
‚úÖ originalPrice set for existing drinks
Executing (default): ALTER TABLE "drinks" 
      ALTER COLUMN "image" TYPE TEXT;
‚úÖ Image column updated to TEXT type
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacity" JSON;
‚úÖ Capacity column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "capacityPricing" JSON;
‚úÖ Capacity pricing column checked/added (JSON type)
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "abv" DECIMAL(5,2);
‚úÖ ABV column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "subcategories" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL UNIQUE,
        "categoryId" INTEGER NOT NULL REFERENCES "categories"("id"),
        "isActive" BOOLEAN DEFAULT true,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ subcategories table checked/created
Executing (default): ALTER TABLE "drinks" 
      ADD COLUMN IF NOT EXISTS "subCategoryId" INTEGER REFERENCES "subcategories"("id");
‚úÖ subCategoryId column checked/added
Executing (default): CREATE TABLE IF NOT EXISTS "settings" (
        "id" SERIAL PRIMARY KEY,
        "key" VARCHAR(255) NOT NULL UNIQUE,
        "value" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ settings table checked/created
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentType';
‚úÖ paymentType column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverId';
‚úÖ driverId column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='drivers' AND column_name='pinHash';
‚úÖ pinHash column already exists in drivers table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='driverAccepted';
‚úÖ driverAccepted column already exists in orders table
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCredited" BOOLEAN DEFAULT false;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayCreditedAt" TIMESTAMP WITH TIME ZONE;
Executing (default): ALTER TABLE "orders"
      ADD COLUMN IF NOT EXISTS "driverPayAmount" DECIMAL(10,2) DEFAULT 0;
‚úÖ Driver pay tracking columns checked/added to orders table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentMethod';
‚úÖ paymentMethod column already exists
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists
Executing (default): ALTER TYPE "enum_orders_status" ADD VALUE IF NOT EXISTS 'completed';
‚úÖ Status enum updated to include completed
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='orders' AND column_name='tipAmount';
‚úÖ tipAmount column already exists in orders table
Executing (default): CREATE TABLE IF NOT EXISTS "transactions" (
        "id" SERIAL PRIMARY KEY,
        "orderId" INTEGER REFERENCES "orders"("id") ON DELETE CASCADE,
        "driverId" INTEGER REFERENCES "drivers"("id") ON DELETE SET NULL,
        "driverWalletId" INTEGER,
        "transactionType" VARCHAR(255) DEFAULT 'payment',
        "paymentMethod" VARCHAR(255) NOT NULL,
        "paymentProvider" VARCHAR(255),
        "amount" DECIMAL(10, 2) NOT NULL,
        "status" VARCHAR(255) DEFAULT 'pending',
        "paymentStatus" VARCHAR(255) DEFAULT 'pending',
        "receiptNumber" VARCHAR(255),
        "checkoutRequestID" VARCHAR(255),
        "merchantRequestID" VARCHAR(255),
        "phoneNumber" VARCHAR(255),
        "transactionDate" TIMESTAMP WITH TIME ZONE,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ transactions table checked/created
Executing (default): SELECT column_name 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='paymentStatus';
‚úÖ paymentStatus column already exists in transactions table
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='orderId';
‚úÖ orderId column already allows NULL in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverId';
‚úÖ driverId column already exists in transactions table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='transactions' AND column_name='driverWalletId';
‚úÖ driverWalletId column already exists in transactions table
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_type_enum AS ENUM ('payment', 'refund', 'tip', 'withdrawal');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'tip'
‚úÖ Added tip to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'withdrawal'
‚úÖ Added withdrawal to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_pay'
‚úÖ Added delivery_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'driver_pay'
‚úÖ Added driver_pay to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'delivery_fee_debit'
‚úÖ Added delivery_fee_debit to transaction_type_enum
Executing (default): ALTER TYPE transaction_type_enum ADD VALUE IF NOT EXISTS 'cash_settlement'
‚úÖ Added cash_settlement to transaction_type_enum
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_status_enum AS ENUM ('pending', 'completed', 'failed', 'cancelled');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): DO $$ BEGIN
        CREATE TYPE transaction_payment_method_enum AS ENUM ('card', 'mobile_money', 'cash', 'system');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): ALTER TYPE transaction_payment_method_enum ADD VALUE IF NOT EXISTS 'system'
‚úÖ Added system to transaction_payment_method_enum
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'payment' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing payment transaction dates
Executing (default): UPDATE transactions AS tip
      SET "transactionDate" = pay."transactionDate"
      FROM transactions AS pay
      WHERE tip."transactionType" = 'tip'
        AND pay."transactionType" = 'payment'
        AND pay."status" = 'completed'
        AND tip."orderId" = pay."orderId"
        AND pay."transactionDate" IS NOT NULL
        AND tip."transactionDate" IS DISTINCT FROM pay."transactionDate";
‚úÖ Synchronized tip transaction dates with payment transactions
Executing (default): UPDATE transactions
      SET "transactionDate" = "createdAt"
      WHERE "transactionType" = 'tip' AND "transactionDate" IS NULL;
‚úÖ Backfilled missing tip transaction dates
Executing (default): SELECT data_type 
        FROM information_schema.columns 
        WHERE table_name='transactions' AND column_name='transactionType';
Executing (default): ALTER TABLE "transactions" 
          ALTER COLUMN "transactionType" TYPE transaction_type_enum USING "transactionType"::transaction_type_enum;
Executing (default): CREATE TABLE IF NOT EXISTS "order_notifications" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "isActive" BOOLEAN DEFAULT true,
        "notes" TEXT,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ order_notifications table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "otps" (
        "id" SERIAL PRIMARY KEY,
        "phoneNumber" VARCHAR(255) NOT NULL,
        "otpCode" VARCHAR(10) NOT NULL,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "attempts" INTEGER DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ otps table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "email_confirmations" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) NOT NULL,
        "token" VARCHAR(255) NOT NULL UNIQUE,
        "expiresAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "isUsed" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ email_confirmations table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "customers" (
        "id" SERIAL PRIMARY KEY,
        "email" VARCHAR(255) UNIQUE,
        "phone" VARCHAR(255) UNIQUE,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "customerName" VARCHAR(255),
        "hasSetPassword" BOOLEAN DEFAULT false,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ customers table checked/created
Executing (default): DO $$ BEGIN
        CREATE TYPE driver_status_enum AS ENUM ('active', 'inactive', 'on_delivery', 'offline');
      EXCEPTION
        WHEN duplicate_object THEN null;
      END $$;
Executing (default): CREATE TABLE IF NOT EXISTS "drivers" (
        "id" SERIAL PRIMARY KEY,
        "name" VARCHAR(255) NOT NULL,
        "phoneNumber" VARCHAR(255) NOT NULL UNIQUE,
        "status" driver_status_enum DEFAULT 'offline',
        "lastActivity" TIMESTAMP WITH TIME ZONE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ drivers table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "driver_wallets" (
        "id" SERIAL PRIMARY KEY,
        "driverId" INTEGER NOT NULL UNIQUE REFERENCES "drivers"("id") ON DELETE CASCADE,
        "balance" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsReceived" DECIMAL(10, 2) NOT NULL DEFAULT 0,
        "totalTipsCount" INTEGER NOT NULL DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ driver_wallets table checked/created
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPay" DECIMAL(10,2) DEFAULT 0;
Executing (default): ALTER TABLE "driver_wallets"
      ADD COLUMN IF NOT EXISTS "totalDeliveryPayCount" INTEGER DEFAULT 0;
‚úÖ Delivery pay tracking columns checked/added to driver_wallets table
Executing (default): CREATE TABLE IF NOT EXISTS "saved_addresses" (
        "id" SERIAL PRIMARY KEY,
        "address" TEXT NOT NULL UNIQUE,
        "placeId" VARCHAR(255),
        "formattedAddress" TEXT,
        "searchCount" INTEGER DEFAULT 0,
        "apiCallsSaved" INTEGER DEFAULT 0,
        "costSaved" DECIMAL(10, 4) DEFAULT 0,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ saved_addresses table checked/created
Executing (default): CREATE TABLE IF NOT EXISTS "admins" (
        "id" SERIAL PRIMARY KEY,
        "username" VARCHAR(255) NOT NULL UNIQUE,
        "password" VARCHAR(255),
        "email" VARCHAR(255) NOT NULL UNIQUE,
        "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL,
        "updatedAt" TIMESTAMP WITH TIME ZONE NOT NULL
      );
‚úÖ admins table checked/created
Executing (default): SELECT is_nullable 
        FROM information_schema.columns 
        WHERE table_name='admins' AND column_name='password';
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='role';
‚úÖ role column already exists in admins table
Executing (default): SELECT column_name 
      FROM information_schema.columns 
      WHERE table_name='admins' AND column_name='inviteToken';
‚úÖ inviteToken columns already exist in admins table
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."username" = 'admin';
Executing (default): SELECT "id", "username", "password", "email", "role", "inviteToken", "inviteTokenExpiry", "createdAt", "updatedAt" FROM "admins" AS "Admin" WHERE "Admin"."role" IS NULL;
Database columns updated successfully.
Executing (default): SELECT count(*) AS "count" FROM "categories" AS "Category";
Database setup completed.
Client connected: 5NeY-477eI9bhb-eAAAB
Client connected: O5ZzZDouKzrVmiWkAAAG
Client connected: 0FfFpn0xJtc4MwkQAAAH
Client connected: V7P1i5GKwNoyL9s8AAAI
Client connected: aux9rUgxj6X5W5KFAAAJ
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
üîç Looking up driver with phone: 0727893741 (cleaned: 0727893741)
üìã Trying 3 variants: [ '0727893741', '254727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
üîç Looking up driver with phone: 254727893741 (cleaned: 254727893741)
üìã Trying 3 variants: [ '254727893741', '0727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "name", "phoneNumber", "status" FROM "drivers" AS "Driver" ORDER BY "Driver"."createdAt" DESC LIMIT 50;
üîç Looking up driver with phone: 0727893741 (cleaned: 0727893741)
üìã Trying 3 variants: [ '0727893741', '254727893741', '727893741' ]
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE ("Driver"."phoneNumber" ILIKE '0727893741' OR "Driver"."phoneNumber" ILIKE '254727893741' OR "Driver"."phoneNumber" ILIKE '727893741') LIMIT 1;
‚úÖ Found driver #3 with phone: 0727893741
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "driverPayCredited", "driverPayCreditedAt", "driverPayAmount", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."customerPhone" LIKE '%0727893741%' ORDER BY "Order"."createdAt" DESC LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" IN ('0727893741', '254727893741', '727893741') LIMIT 1;
üì± Driver OTP generated: 4 digits
üì± Driver found: Lewis-Local (0727893741)
Executing (default): UPDATE "otps" SET "isUsed"=$1,"updatedAt"=$2 WHERE "phoneNumber" = $3 AND "isUsed" = $4
Executing (default): INSERT INTO "otps" ("id","phoneNumber","otpCode","expiresAt","isUsed","attempts","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7) RETURNING "id","phoneNumber","otpCode","expiresAt","isUsed","attempts","createdAt","updatedAt";
üì± Sending OTP to 254727893741 via Advanta OTP API
üì± API URL: https://quicksms.advantasms.com/api/services/sendotp
üì± Payload: {
  "apikey": "172172cbc7c1e27c9447c94a8ea4a34a",
  "partnerID": "14944",
  "message": "Your Dial A Drink login code is: 5862. This code is valid for 3 hours. Do not share this code with anyone.",
  "shortcode": "AdvantaSMS",
  "mobile": "254727893741"
}
üì± API Key configured: Yes
üì± Partner ID: 14944
üì± Sender ID: AdvantaSMS
‚ùå Error sending OTP to 0727893741: Request failed with status code 402
API error response: {
  success: false,
  message: 'Low credit units to send message, Current balance 0.00, Required 1'
}
API error status: 402
‚ö†Ô∏è  ADVANTA ACCOUNT HAS INSUFFICIENT CREDITS!
‚ö†Ô∏è  Please top up your Advanta SMS account to continue sending OTPs.
Failed to send OTP to driver: SMS service account has insufficient credits. Please contact administrator.
üì± Driver OTP generated (SMS failed): 5862 - Admin can provide from dashboard
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT "id", "customerName", "customerPhone", "customerEmail", "deliveryAddress", "totalAmount", "tipAmount", "status", "paymentStatus", "notes", "paymentType", "paymentMethod", "driverId", "driverAccepted", "driverPayCredited", "driverPayCreditedAt", "driverPayAmount", "createdAt", "updatedAt" FROM "orders" AS "Order" WHERE "Order"."customerPhone" LIKE '%0727893741%' ORDER BY "Order"."createdAt" DESC LIMIT 1;
Executing (default): SELECT "id", "name", "phoneNumber", "pushToken", "status", "lastActivity", "pinHash", "createdAt", "updatedAt" FROM "drivers" AS "Driver" WHERE "Driver"."phoneNumber" IN ('0727893741', '254727893741', '727893741') LIMIT 1;
üì± Driver OTP generated: 4 digits
üì± Driver found: Lewis-Local (0727893741)
Executing (default): UPDATE "otps" SET "isUsed"=$1,"updatedAt"=$2 WHERE "phoneNumber" = $3 AND "isUsed" = $4
Executing (default): INSERT INTO "otps" ("id","phoneNumber","otpCode","expiresAt","isUsed","attempts","createdAt","updatedAt") VALUES (DEFAULT,$1,$2,$3,$4,$5,$6,$7) RETURNING "id","phoneNumber","otpCode","expiresAt","isUsed","attempts","createdAt","updatedAt";
üì± Sending OTP to 254727893741 via Advanta OTP API
üì± API URL: https://quicksms.advantasms.com/api/services/sendotp
üì± Payload: {
  "apikey": "172172cbc7c1e27c9447c94a8ea4a34a",
  "partnerID": "14944",
  "message": "Your Dial A Drink login code is: 2353. This code is valid for 3 hours. Do not share this code with anyone.",
  "shortcode": "AdvantaSMS",
  "mobile": "254727893741"
}
üì± API Key configured: Yes
üì± Partner ID: 14944
üì± Sender ID: AdvantaSMS
‚ùå Error sending OTP to 0727893741: Request failed with status code 402
API error response: {
  success: false,
  message: 'Low credit units to send message, Current balance 0.00, Required 1'
}
API error status: 402
‚ö†Ô∏è  ADVANTA ACCOUNT HAS INSUFFICIENT CREDITS!
‚ö†Ô∏è  Please top up your Advanta SMS account to continue sending OTPs.
Failed to send OTP to driver: SMS service account has insufficient credits. Please contact administrator.
üì± Driver OTP generated (SMS failed): 2353 - Admin can provide from dashboard
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT "id", "start_date" AS "startDate", "end_date" AS "endDate", "is_active" AS "isActive", "title", "createdAt", "updatedAt" FROM "countdowns" AS "Countdown" WHERE "Countdown"."is_active" = true;
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order";
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" IN ('pending', 'confirmed');
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."createdAt" >= '2025-11-12 21:00:00.000 +00:00' AND "Order"."paymentStatus" = 'paid';
Executing (default): SELECT "totalAmount", "tipAmount" FROM "orders" AS "Order" WHERE "Order"."paymentStatus" = 'paid';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed';
Executing (default): SELECT count(*) AS "count" FROM "transactions" AS "Transaction" WHERE "Transaction"."transactionType" = 'tip' AND "Transaction"."status" = 'completed' AND "Transaction"."createdAt" >= '2025-11-12 21:00:00.000 +00:00';
Executing (default): SELECT count(*) AS "count" FROM "orders" AS "Order" WHERE "Order"."status" = 'cancelled';
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink";
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" = true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE "Drink"."isAvailable" IS NOT true;
Executing (default): SELECT count(*) AS "count" FROM "drinks" AS "Drink" WHERE ("Drink"."limitedTimeOffer" = true OR "Drink"."isOnOffer" = true);
